<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" href="assets/images/palet.png" type="image/x-icon" class="doimau"/>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Danh mục</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body wappad class="stories">
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="inner-wrap">
          <!-- Logo -->
          <div class="inner-logo">
            <a href="index.html">
              <img src="assets/images/palet.png" alt="Wappad" class="doimau"/>
            </a>
          </div>

          <!-- Menu -->
          <div class="inner-menu">
            <ul class="header-menu">
              <li>
                <a href="index.html">Trang chủ</a>
              </li>
              <li>
                <a href="#">Danh mục</a>
              </li>
              <li>
                <a href="gthieu.html">Giới thiệu</a>
              </li>
            </ul>
          </div>

          <!-- Search -->
          <form action="#" class="inner-form">
            <input id="inputField" type="text" name="keyword" placeholder="Nhập từ khóa...">
            <button id="submitButton">
                <i class="fa-solid fa-magnifying-glass"></i>
            </button>
        </form>

          <!-- Button -->
          <div class="inner-button">
            <a href="login.html" class="button login" button-login>
              Đăng nhập
            </a>
            <a href="register.html" class="button register" button-register>
              Đăng ký
            </a>
            <a href="javascript:;" class="button logout" button-logout>
              Đăng xuất
            </a>
          </div>
        </div>
      </div>
    </header>
    <!-- End Header -->

    <!-- Section 1 -->
    <section class="section-1">
      <div class="container">
        <div class="inner-wrap">
          <ul>
            <li><a href="/stories.html?category_id=1">KINH DỊ</a></li>
            <li><a href="/stories.html?category_id=2">TRINH THÁM</a></li>
            <li><a href="/stories.html?category_id=3">CỔ TÍCH</a></li>
            <li><a href="/stories.html?category_id=4">HỒI KÝ</a></li>
            <li><a href="/stories.html?category_id=5">TÙY BÚT</a></li>
            <li><a href="/stories.html?category_id=6">ONE SHOT</a></li>
            <li><a href="/stories.html?category_id=7">GIẢ TƯỞNG</a></li>
            <li><a href="/stories.html?category_id=8">TIỂU THUYẾT</a></li>
            <li><a href="/stories.html?category_id=9">ACTION</a></li>
            <li><a href="/stories.html?category_id=10">TRUYỆN TRANH</a></li>
            <li><a href="/stories.html?category_id=11">NGÔN TÌNH</a></li>
          </ul>
        </div>
      </div>
    </section>
    <!-- ENnd Section 1 -->

    <!-- Section 2 -->
    <div class="section-2">
      <div class="container">
        <div class="box-head">
          <div class="inner-left">
            <!-- <div class="inner-sub-title">Có gì mới?</div> -->
            <h2 class="inner-title">Một số tựa truyện của chúng tôi</h2>
          </div>
          <div class="inner-right">
            <!-- <a href="#" class="button-outline"> -->
              <!-- Xem thêm <i class="fa-solid fa-angle-right"></i> -->
            </a>
          </div>
        </div>
        <div id="dataBlock" class="inner-wrap">
        </div>
      </div>
    </div>
    <!-- End Section 2 -->

    <!-- Section 3 -->

    <!-- End Section 3 -->

    <!-- Section 4 -->
   
    <!-- End Section 4 -->

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="inner-top">
          <div class="inner-content">
            Đăng ký ngay để không bỏ lỡ các chương trình của chúng tôi
          </div>
          <form action class="inner-form">
            <input type="email" name placeholder="Nhập email của bạn..." />
            <button>Đăng Ký Ngay</button>
          </form>
        </div>
        <div class="inner-middle">
          <nav class="inner-links">
            <ul>
              <li>
                <a href="index.html">Trang Chủ</a>
              </li>
              <li>
                <a href="#">Danh Mục</a>
              </li>
              <li>
                <a href="gthieu.html">Giới Thiệu</a>
              </li>
            </ul>
          </nav>
          <nav class="inner-socials">
            <ul>
              <li>
                <a href="#" target="_blank">
                  <i class="fa-brands fa-facebook"></i>
                </a>
              </li>
              <li>
                <a href="#" target="_blank">
                  <i class="fa-brands fa-x-twitter"></i>
                </a>
              </li>
              <li>
                <a href="#" target="_blank">
                  <i class="fa-brands fa-instagram"></i>
                </a>
              </li>
              <li>
                <a href="#" target="_blank">
                  <i class="fa-brands fa-youtube"></i>
                </a>
              </li>
            </ul>
          </nav>
        </div>
        <div class="inner-bottom">
          <div class="inner-copyright">© 2024 CNPM. Nhom 2.</div>
          <div class="inner-logo">
            <a href="index.html">
              <img src="assets/images/logo.svg" alt />
            </a>
          </div>
          <nav class="inner-links">
            <ul>
              <li>
                <a href="#">Điều khoản dịch vụ</a>
              </li>
              <li>
                <a href="#">Chính sách bảo mật</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </footer>
    <!-- End Footer -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="assets/js/script.js" type="module"></script>
    <script src="assets/js/login_register.js" type="module"></script>
    <script>
        //Khi thay API local thì dùng cái này nha
        const url = new URL(window.location.href);
        const category_id = url.searchParams.get('category_id');
        if(category_id){
          apiUrl = `http://localhost:8090/api/search_category?category_id=${category_id}`
        }else{
          apiUrl = `http://localhost:8090/api/search`
        }
        //const apiUrl = '/database/dataAllProduct.json'; // Thay URL bằng API của bạn

// Lấy phần tử hiển thị dữ liệu
        const dataBlock = document.getElementById('dataBlock');

// Gọi API bằng Fetch
fetch(apiUrl)
    .then(response => {
        console.log(response);
        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }
        return response.json(); // Parse JSON từ response
    })
    .then(data => {
        // Hiển thị dữ liệu trong block
        let listHTML = ''; 
        for (let i = 0; i < data.length; i++) {
           // Thêm mỗi item vào trong <li>
                listHTML+= `
            <div class="product-item">
            <a href="./chapter.html?story_id=${data[i].story_id}">
              <div class="inner-image">
                <img
                  src="${data[i].url}"
                  alt
                />
              </div>
              <div class="inner-content">
                <h3 class="inner-title">${data[i].title}</h3>
                <div class="inner-info">
                  <div class="inner-info-item">Tác giả: <b>${data[i].authorName}</b></div>
                  <div class="inner-info-item">Thể loại: <b>Chưa rõ</b></div>
                </div>
              </div>
            </a>
          </div>
        `;
        }
        dataBlock.innerHTML = listHTML
        
    })
    .catch(error => {
        // Hiển thị lỗi nếu có
        dataBlock.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
    });
    </script>
  </body>
</html>
